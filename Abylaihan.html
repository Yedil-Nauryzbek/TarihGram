<!DOCTYPE html>
<html lang="kk">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Абылай хан профилі - ТарихGram</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 min-h-screen">

<!-- Навигация -->
<div class="flex items-center justify-between p-4 bg-white shadow-md mb-4">
  <a href="index.html" class="text-blue-600 font-semibold hover:underline">← Қайту</a>
  <h1 class="text-2xl font-bold">Абылай хан профилі</h1>
  <div></div>
</div>

<!-- Профиль хедер -->
<div class="flex items-center justify-between p-4 bg-white shadow-md mb-4">
  <div class="flex items-center space-x-4">
    <img src="https://avatars.mds.yandex.net/get-entity_search/10844871/1152437772/S600xU_2x" alt="Абылай хан" class="w-20 h-20 rounded-full border">
    <div>
      <h1 class="text-2xl font-bold">Абылай хан</h1>
      <p class="text-gray-600">Хан дәуірі: 1770–1781</p>
    </div>
  </div>
  <div class="text-right">
    <p class="text-gray-600 text-sm">850 жазылушы</p>
  </div>
</div>

<!-- Посттар -->
<main class="max-w-2xl mx-auto mt-6 space-y-6 px-4 pb-20">
  <!-- Пост -->
  <article class="bg-white rounded-2xl shadow-md overflow-hidden post" data-post-id="1">
    <div class="px-4 py-3">
      <div class="flex items-center space-x-4 text-xl mb-2">
        <button class="like-btn">❤️</button>
        <span class="like-count text-gray-700">87 лайк</span>
        <span class="comment-count text-gray-700">12 коммент</span>
      </div>

      <img src="https://ognialatau.kz/uploads/news/14440/news14440.jpg" alt="Абылай хан пост суреті" class="w-full object-cover mb-3">

      <p class="mb-3 text-gray-800">
        Жұртым, басы қосылмаған елді жау табанға салады. Бірлік болса – жеңіс те, ерлік те біздің қолымызда. 
        Жоңғарға қарсы аттанарда сендерді бір тудың астына жинадым. 
        Қазақтың күші – елдің ынтымағында. Біз біріксек – ешбір дұшпанға бас имейміз.
      </p>

      <div class="space-y-2">
        <h4 class="font-semibold">Пікірлер:</h4>
        <ul class="comment-list list-disc pl-5 text-sm text-gray-700"></ul>
        <p class="view-all text-blue-600 text-sm cursor-pointer"></p>
        <div class="flex space-x-2 mt-1">
          <input type="text" placeholder="Пікір жаз..." class="comment-input flex-1 border rounded-lg px-2 py-1">
          <button class="comment-btn bg-blue-600 text-white px-3 rounded-lg">Жазу</button>
        </div>
      </div>
    </div>
  </article>
</main>

<!-- Скрипт -->
<script>
const currentUser = "Еділ Наурызбек & Жауған Алдияр";

const POSTS = {
  1: {
    likes: 87,
    liked: false,
    commentsAll: [
      { author: "Төле би", text: "Ханның елді бірлікке шақырғаны – халқымыздың болашағын бекітетін жол." },
      { author: "Қазыбек би", text: "Бірлік бар жерде, тізе бүкпейтін халық бар. Абылайдың сөзі – соның дәлелі." },
      { author: "Қабанбай батыр", text: "Ханның туының астында аттансақ, жауға қазақтың қайраты да, айбары да жетеді." },
      { author: "Бөгенбай батыр", text: "Абылайдың соңынан ерген елді ешбір дұшпан жеңе алмайды." },
      { author: "Аноним", text: "Ұлы даланың қаһарманы!" },
      { author: "Тарихшы", text: "Абылайдың жорықтары маңызды." }
    ],
    displayedCount: 12,
    firstVisibleCount: 2
  }
};

document.querySelectorAll('.post').forEach(postEl => {
  const id = postEl.getAttribute('data-post-id');
  const cfg = POSTS[id];

  const likeBtn = postEl.querySelector('.like-btn');
  const likeCountSpan = postEl.querySelector('.like-count');
  const commentCountSpan = postEl.querySelector('.comment-count');
  const commentListEl = postEl.querySelector('.comment-list');
  const viewAllEl = postEl.querySelector('.view-all');
  const commentInput = postEl.querySelector('.comment-input');
  const commentBtn = postEl.querySelector('.comment-btn');

  // лайк
  likeCountSpan.textContent = cfg.likes + " лайк";
  likeBtn.addEventListener('click', () => {
    cfg.liked = !cfg.liked;
    cfg.likes += cfg.liked ? 1 : -1;
    likeBtn.classList.toggle('text-red-500', cfg.liked);
    likeCountSpan.textContent = cfg.likes + " лайк";
  });

  // комменты
  function updateCommentCount() {
    commentCountSpan.textContent = cfg.displayedCount + " коммент";
  }

  function renderComments(showAll = false) {
    commentListEl.innerHTML = "";
    const toShow = showAll ? cfg.commentsAll : cfg.commentsAll.slice(0, cfg.firstVisibleCount);
    toShow.forEach(c => {
      const li = document.createElement('li');
      li.innerHTML = `<span class="font-semibold">${c.author}:</span> ${c.text}`;
      commentListEl.appendChild(li);
    });

    viewAllEl.textContent = showAll ? "Жасыру" : `Барлық ${cfg.displayedCount} пікірді көру...`;
    updateCommentCount();
  }

  let expanded = false;
  renderComments(expanded);

  viewAllEl.addEventListener('click', () => {
    expanded = !expanded;
    renderComments(expanded);
  });

  commentBtn.addEventListener('click', () => {
    const text = commentInput.value.trim();
    if (!text) return;
    cfg.commentsAll.unshift({ author: currentUser, text });
    cfg.displayedCount++;
    commentInput.value = "";
    renderComments(expanded);
  });
});
</script>
</body>
</html>
